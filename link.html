<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/apt/link.apt at 2020-09-13
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200913" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Powerunit - Java Testing framework for JDK 1.8 - Extension to provide matchers based on annotations. &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<link rel="icon" type="image/png" href="logo.png" />
  		<link rel="shortcut icon" type="image/png" href="logo.png" />
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/powerunit/powerunit-extensions-matchers">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Powerunit - Java Testing framework for JDK 1.8 - Extension to provide matchers based on annotations.</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-09-13<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.3.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
      <li class="nav-header">General documentation</li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="simple.html" title="Samples"><span class="icon-chevron-down"></span>Samples</a>
    <ul class="nav nav-list">
    <li><a href="simple.html" title="Simple usage"><span class="none"></span>Simple usage</a></li>
    <li><a href="archetype.html" title="Archetype usage"><span class="none"></span>Archetype usage</a></li>
    <li><a href="map.html" title="Map"><span class="none"></span>Map</a></li>
    <li class="active"><a href="#"><span class="none"></span>Link</a></li>
    </ul>
</li>
    <li><a href="migrate-0.2.0.html" title="Migration"><span class="icon-chevron-right"></span>Migration</a></li>
      <li class="nav-header">Linked projects</li>
    <li><a href="../powerunit" title="PowerUnit"><span class="none"></span>PowerUnit</a></li>
</ul>
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="www.powerunit.ch/powerunit-extensions-matchers" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="../" title="PowerUnit" class="builtBy"><img class="builtBy"  alt="PowerUnit" src="../powerunit/logo.png"    /></a>
<a href="https://travis-ci.org/powerunit/powerunit-extensions-matchers" title="Travis-ci" class="builtBy"><img class="builtBy"  alt="Travis-ci" src="https://travis-ci.org/powerunit/powerunit-extensions-matchers.svg?branch=master"    /></a>
<a href="https://snyk.io/test/github/powerunit/powerunit-extensions-matchers/badge.svg?targetFile=pom.xml" title="Vulnerability" class="builtBy"><img class="builtBy"  alt="Vulnerability" src="https://snyk.io/test/github/powerunit/powerunit-extensions-matchers/badge.svg?targetFile=pom.xml"    /></a>
<a href="https://www.codacy.com/gh/powerunit/powerunit-extensions-matchers?utm_source=github.com&utm_medium=referral&utm_content=powerunit/powerunit-extensions-matchers&utm_campaign=Badge_Grade" title="Codacy" class="builtBy"><img class="builtBy"  alt="Codacy" src="https://app.codacy.com/project/badge/Grade/244810ab50934eebb04cd1d9da7fd57c"    /></a>
<a href="https://coveralls.io/github/powerunit/powerunit-extensions-matchers?branch=master" title="Coveralls" class="builtBy"><img class="builtBy"  alt="Coveralls" src="https://coveralls.io/repos/github/powerunit/powerunit-extensions-matchers/badge.svg?branch=master"    /></a>
<a href="https://codecov.io/gh/powerunit/powerunit-extensions-matchers" title="Codecov" class="builtBy"><img class="builtBy"  alt="Codecov" src="https://codecov.io/gh/powerunit/powerunit-extensions-matchers/branch/master/graph/badge.svg"    /></a>
<a href="https://www.codefactor.io/repository/github/powerunit/powerunit-extensions-matchers" title="Codefactor" class="builtBy"><img class="builtBy"  alt="Codefactor" src="https://www.codefactor.io/repository/github/powerunit/powerunit-extensions-matchers/badge"    /></a>
<a href="https://bettercodehub.com/results/powerunit/powerunit-extensions-matchers" title="Bettercode" class="builtBy"><img class="builtBy"  alt="Bettercode" src="https://bettercodehub.com/edge/badge/powerunit/powerunit-extensions-matchers?branch=master"    /></a>
<a href="https://codebeat.co/projects/github-com-powerunit-powerunit-extensions-matchers-master" title="Codebeat" class="builtBy"><img class="builtBy"  alt="Codebeat" src="https://codebeat.co/badges/cdebf167-fee0-46b4-b33d-c613f1586a9d"    /></a>
<a href="https://maven-badges.herokuapp.com/maven-central/ch.powerunit.extensions/powerunit-extensions-matchers" title="Maven" class="builtBy"><img class="builtBy"  alt="Maven" src="https://maven-badges.herokuapp.com/maven-central/ch.powerunit.extensions/powerunit-extensions-matchers/badge.svg"    /></a>
<a href="http://javadoc.io/doc/ch.powerunit.extensions/powerunit-extensions-matchers" title="Javadoc" class="builtBy"><img class="builtBy"  alt="Javadoc" src="http://javadoc.io/badge/ch.powerunit.extensions/powerunit-extensions-matchers.svg?color=yellow"    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<section>
<h2><a name="Detection_of_Matcher_for_Class"></a>Detection of Matcher for Class</h2><section>
<h3><a name="General_concepts"></a>General concepts</h3>
<p><i>Since version 0.2.0, the detection of link between classes has been enhanced.</i></p>
<p>Conceptually, for every fields or parent classes, the annotation processor will try to find a Matcher to compare the values. This is done by detecting the relation between the class in compilation, but also by looking for existing Matcher (<i>new in version 0.2.0</i>). </p>
<p>To understand this concept, let's assume we have a first maven project, that use <i>powerunit-extensions-matchers</i>, with the following class annotated with <code>@ProvideMatchers</code> :</p>
<ul>
<li><code>Pojo1</code></li></ul>
<p>Based on this class, a <code>Matcher</code> class named <code>Pojo1Matchers</code> will also be generated. This class will provide several DSL method, like :</p>
<ul>
<li><code>pojo1With()</code></li>
<li><code>pojo1WithSameValue()</code></li></ul>
<p>Now, we have a second maven project, which uses the first one as dependency, we have the following annotated classes :</p>
<ul>
<li><code>Pojo4</code> which extends <code>Pojo1</code></li>
<li><code>Pojo6</code> which have a <code>Pojo1</code> field (named <code>field1</code>)</li></ul>
<p>Based on these classes, several <code>Matchers</code> classes will be generated :</p>
<ul>
<li><code>Pojo4Matchers</code> - The annotation processor detects that the <code>Pojo1Matchers</code> class is a valid <code>Matcher</code> for <code>Pojo1</code> event if it is already compiled.
<ul>
<li>The method <code>pojo4With()</code> starts a DSL without check on the parent class</li>
<li>The method <code>pojo4With(org.hamcrest.Matcher&lt;? super ch.powerunit.extensions.matchers.multi.parent.Pojo1&gt; matcherOnParent)</code> starts a DSL with a matcher on the parent class. </li>
<li>The method <code>pojo4WithSameValue()</code> start a DSL to compare for same value. The <code>pojo1WithSameValue()</code> from <code>Pojo1Matchers</code> will be used for the control of the parent class.</li></ul></li>
<li><code>Pojo6Matchers</code> - The annotation processor detects that the <code>Pojo1Matchers</code> class is a valid <code>Matcher</code> for <code>Pojo1</code> event if it is already compiled.
<ul>
<li>The method <code>pojo6With()</code> starts the DSL. This DSL will provides a method <code>field1With()</code> chaining to the <code>pojo1With</code> DSL.</li>
<li>The method <code>pojo4WithSameValue()</code> start a DSL to compare for same value. The <code>pojo6WithSameValue()</code> from <code>Pojo1Matchers</code> will be used for the control of <code>field1</code>.</li></ul></li></ul></section><section>
<h3><a name="Limitations"></a>Limitations</h3><section>
<h4><a name="Circular_references"></a>Circular references</h4>
<p>It is possible to create classes that may produce <code>StackOverflowError</code> for the <code>hasSameValue</code> matcher. This is the case with bidirectional class references or as a more generic case, circular references. It is almost impossible to detect these case at compile time ; For example, event if a class <code>A</code> has a field of class <code>B</code> and class <code>B</code> a field of class <code>A</code>, it is not possible to assume we have a bidirectional referencing (the issue is only when an instance of <code>A</code> references a specific instance of <code>B</code> and this instance of <code>B</code> references the previous instance of <code>A</code>. </p><section>
<h5><a name="Handling_this_case_with_version_0.2.0"></a>Handling this case with version 0.2.0</h5>
<p>In version 0.2.0, the easy way to break the cycle is to :</p>
<ul>
<li>At compile time, based on the structure on the link, it is possible to annotated one of the referencing fields with <code>@IgnoreInMatcher</code>. The field will be ignored which will break the circular reference.</li></ul></section><section>
<h5><a name="Handling_this_case_with_version_0.3.0"></a>Handling this case with version 0.3.0</h5>
<p>Since version 0.3.0, an additional <code>hasSameValue</code> methods is available to specify fields (based on field name) to be ignored. The previous option is still available, but it is also possible to use this ignore parameter. It is possible to chain the ignore by using a syntax like <code>fieldName.fieldNameChildren</code>. </p>
<p><i>In case one of the referenced fields or the super class use an old version of the generated matchers and doesn't support the ignore feature, this feature is also not available on fields of the referenced fields or on fields of the super class.</i></p>
<p>Since version 0.3.0, the generated matchers try to detect the cycle. The <code>hasSameValue</code> methods may detect the cycle and break it by replacing the deep reference with a <code>sameInstance</code> Matcher. This feature is not able to detect cycle involving <code>Map</code>, <code>Collection</code>, <code>Optional</code> or <code>Array</code>.</p></section></section></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2020.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
