<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/apt/migrate-0.2.0.apt at 2020-09-13
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200913" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Powerunit - Java Testing framework for JDK 1.8 - Extension to provide matchers based on annotations. &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<link rel="icon" type="image/png" href="logo.png" />
  		<link rel="shortcut icon" type="image/png" href="logo.png" />
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/powerunit/powerunit-extensions-matchers">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Powerunit - Java Testing framework for JDK 1.8 - Extension to provide matchers based on annotations.</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-09-13<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.3.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
      <li class="nav-header">General documentation</li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="simple.html" title="Samples"><span class="icon-chevron-right"></span>Samples</a></li>
    <li class="active"><a href="#"><span class="icon-chevron-down"></span>Migration</a>
    <ul class="nav nav-list">
    <li class="active"><a href="#"><span class="none"></span>Version 0.2.X</a></li>
    </ul>
</li>
      <li class="nav-header">Linked projects</li>
    <li><a href="../powerunit" title="PowerUnit"><span class="none"></span>PowerUnit</a></li>
</ul>
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="www.powerunit.ch/powerunit-extensions-matchers" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="../" title="PowerUnit" class="builtBy"><img class="builtBy"  alt="PowerUnit" src="../powerunit/logo.png"    /></a>
<a href="https://travis-ci.org/powerunit/powerunit-extensions-matchers" title="Travis-ci" class="builtBy"><img class="builtBy"  alt="Travis-ci" src="https://travis-ci.org/powerunit/powerunit-extensions-matchers.svg?branch=master"    /></a>
<a href="https://snyk.io/test/github/powerunit/powerunit-extensions-matchers/badge.svg?targetFile=pom.xml" title="Vulnerability" class="builtBy"><img class="builtBy"  alt="Vulnerability" src="https://snyk.io/test/github/powerunit/powerunit-extensions-matchers/badge.svg?targetFile=pom.xml"    /></a>
<a href="https://www.codacy.com/gh/powerunit/powerunit-extensions-matchers?utm_source=github.com&utm_medium=referral&utm_content=powerunit/powerunit-extensions-matchers&utm_campaign=Badge_Grade" title="Codacy" class="builtBy"><img class="builtBy"  alt="Codacy" src="https://app.codacy.com/project/badge/Grade/244810ab50934eebb04cd1d9da7fd57c"    /></a>
<a href="https://coveralls.io/github/powerunit/powerunit-extensions-matchers?branch=master" title="Coveralls" class="builtBy"><img class="builtBy"  alt="Coveralls" src="https://coveralls.io/repos/github/powerunit/powerunit-extensions-matchers/badge.svg?branch=master"    /></a>
<a href="https://codecov.io/gh/powerunit/powerunit-extensions-matchers" title="Codecov" class="builtBy"><img class="builtBy"  alt="Codecov" src="https://codecov.io/gh/powerunit/powerunit-extensions-matchers/branch/master/graph/badge.svg"    /></a>
<a href="https://www.codefactor.io/repository/github/powerunit/powerunit-extensions-matchers" title="Codefactor" class="builtBy"><img class="builtBy"  alt="Codefactor" src="https://www.codefactor.io/repository/github/powerunit/powerunit-extensions-matchers/badge"    /></a>
<a href="https://bettercodehub.com/results/powerunit/powerunit-extensions-matchers" title="Bettercode" class="builtBy"><img class="builtBy"  alt="Bettercode" src="https://bettercodehub.com/edge/badge/powerunit/powerunit-extensions-matchers?branch=master"    /></a>
<a href="https://codebeat.co/projects/github-com-powerunit-powerunit-extensions-matchers-master" title="Codebeat" class="builtBy"><img class="builtBy"  alt="Codebeat" src="https://codebeat.co/badges/cdebf167-fee0-46b4-b33d-c613f1586a9d"    /></a>
<a href="https://maven-badges.herokuapp.com/maven-central/ch.powerunit.extensions/powerunit-extensions-matchers" title="Maven" class="builtBy"><img class="builtBy"  alt="Maven" src="https://maven-badges.herokuapp.com/maven-central/ch.powerunit.extensions/powerunit-extensions-matchers/badge.svg"    /></a>
<a href="http://javadoc.io/doc/ch.powerunit.extensions/powerunit-extensions-matchers" title="Javadoc" class="builtBy"><img class="builtBy"  alt="Javadoc" src="http://javadoc.io/badge/ch.powerunit.extensions/powerunit-extensions-matchers.svg?color=yellow"    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<section>
<h2><a name="Migration_to_version_0.2.X"></a>Migration to version 0.2.X</h2>
<p>Several changes introduced in version 0.2.0 impact how this annotation processor works. To migrate from a 0.1.X version, the following points must be taken into consideration.</p><section>
<h3><a name="Dependency_to_hamcrest"></a>Dependency to hamcrest</h3>
<p>Since version 0.2.0, a dependency to <i>hamcrest</i> is not anymore provided automatically. The idea is remove the strong link between <i>powerunit-extensions-matchers</i> and a specific version of <i>hamcrest</i>. </p>
<p>If you haven't a dependency to <i>hamcrest</i>, you may have to add once. Three different versions have been tested :</p><section>
<h4><a name="Version_1.X"></a>Version 1.X</h4>
<div class="source"><pre class="prettyprint linenums">&lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
&lt;artifactId&gt;hamcrest-all&lt;/artifactId&gt;
&lt;version&gt;1.3&lt;/version&gt;</pre></div>
<p>Please note that the artifact <code>hamcrest-all</code> is used.</p></section><section>
<h4><a name="Version_2.X"></a>Version 2.X</h4>
<div class="source"><pre class="prettyprint linenums">&lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
&lt;artifactId&gt;hamcrest&lt;/artifactId&gt;
&lt;version&gt;2.1&lt;/version&gt;</pre></div>
<div class="source"><pre class="prettyprint linenums">&lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
&lt;artifactId&gt;hamcrest&lt;/artifactId&gt;
&lt;version&gt;2.2&lt;/version&gt;</pre></div>
<p>The <code>all</code> version is not available any more in version 2.X.</p></section></section><section>
<h3><a name="a.40Factory_annotation_removed"></a>@Factory annotation removed</h3>
<p>As part of the removal of the link between this library and hamcrest, the generated <code>Matcher</code> doesn't use anymore the annotation <code>@Factory</code>. This annotation was part of <i>hamcrest</i> version 1.3 and is not available anymore in version 2+ of <i>hamcrest</i>. This annotation was used to generated a class (or interface) referencing all the entry points of the <code>Matcher</code>, but not at runtime. </p>
<p>As this annotation is not used anymore in the produced <code>Matcher</code>, it will not be possible to use the generator of <i>hamcrest</i> (1.3) anymore. Also the included generator included in this annotation processor (parsing the <code>@Factory</code> annotation) as been removed. The generator of this annotation processor was enabled by the option <code>ch.powerunit.extensions.matchers.factoryprocessor.FactoryAnnotationsProcessor.targets</code>. If you used it, you should see below how to replace it.</p></section><section>
<h3><a name="Generation_of_DSL_interface"></a>Generation of DSL interface</h3>
<p>Before version 0.2.0, two methods were available to generate an interface that exposes the entry points of the <code>Matcher</code>. Only one is now available :</p>
<ul>
<li>The option <code>ch.powerunit.extensions.matchers.factoryprocessor.FactoryAnnotationsProcessor.targets</code> is <b>removed and not supported anymore</b>.</li>
<li>Using the option <code>ch.powerunit.extensions.matchers.provideprocessor.ProvidesMatchersAnnotationsProcessor.factory</code> it is possible to specify the fully qualified name of a interface to be generated which will contains references to all the entry points of all the generated <code>Matcher</code>. 
<p>It is not possible, as it was with the other generator, to generated differents interface based on a regex. Also, it is not possible to add additional method to this interface as it was possible by using the <code>@Factory</code> annotation.</p></li></ul></section><section>
<h3><a name="Removed_artifacts"></a>Removed artifacts</h3>
<p>Before version 0.2.0, two additional artifacts where generated, containing only one of the two annotation processors. As now only one annotation processor exists these two artifacts have been removed. There were named <code>powerunit-extensions-matchers-factory</code> and <code>powerunit-extensions-matchers-providematchers</code></p>
<p>If you used these artifacts you must now use directly the master artifact <code>powerunit-extensions-matchers</code>. As the factory annotation processor has been removed no direct replacement is provided.</p></section><section>
<h3><a name="META-INF_files"></a>META-INF files</h3>
<p>Before version 0.2.0, the annotation processors generate (if JAX-B was available, so not on JDK 9+) a metadata XML information file. This file is not generated anymore. It should not be an issue, as it was more an internal functionality than a real feature. Nevertheless metadata information are now directly available inside the generated <code>Matcher</code>. </p>
<div class="source"><pre class="prettyprint linenums">  // ---------------------------------------------------------------------------
  // METADATA

  /**
   * Metadata regarding this matcher.
   */
  public static final Metadata METADATA = new Metadata();

   public static final class FieldMetadata {
    public final String NAME, TYPE, ACCESSOR, STEREOTYPE;
    public final boolean IGNORED;
    private FieldMetadata(String name, String type, String accessor,String stereotype, boolean ignored) {
      NAME=name; TYPE=type; ACCESSOR=accessor; STEREOTYPE=stereotype; IGNORED=ignored;
    }
  }

  public static final class Metadata {

    private Metadata() {}

    public final String ANNOTATION_PROCESSOR_VERSION = &quot;0.2.0&quot;;

    public final long COMPATIBILITY = 0;

    public final String SOURCE_CLASS_NAME = &quot;ch.test.testme.SimplePojo &quot;;

    public final Class&lt;ch.test.testme.SimplePojo&gt; SOURCE_CLASS = ch.test.testme.SimplePojo.class;

    public final String SOURCE_PARENT_CLASS_NAME = null;

    public final FieldMetadata[] FIELDS = new FieldMetadata[]{ new FieldMetadata(&quot;oneField&quot;,&quot;java.lang.String&quot;,&quot;oneField&quot;,&quot;StringFieldDescription&quot;,false) };

  }</pre></div>
<p>The Metadata information may evolve, but the field <code>COMPATIBILITY</code> must provide code information regarding these evolutions or evolutions of the matchers.</p></section><section>
<h3><a name="Link_between_classes"></a>Link between classes</h3>
<p>The <a href="./link.html">detection of link</a> between class and <code>Matcher</code> has been enhanced in version 0.2.0. In some case, when before the annotation processor was not able to detect that a matcher is available for a field or the parent class, the link is detected. In these case, it will be possible to chain the build and the linked matcher will be used for a <i>WithSameValue</i> <code>Matcher</code>. It is an enhancement, but it may change the expected outcome, as before a simple <code>is</code> <code>Matcher</code> was use (which rely on the <code>equals</code> method) and the replacement will be to use a <i>WithSameValue</i> <code>Matcher</code>. </p>
<p>Also, the annotation processor try to find matcher already existing, for instance from a dependency. If it found one (using naming convention based on the one from this library and detection of the metadata), it will also use it and avoid using a <code>is</code> <code>Matcher</code>. It may also induce not so visible change in a <code>Matcher</code> as if a matcher is added in a dependency (or already existing), it may be detected and used now.</p>
<p>Finally, if for a class it is not possible to find a Matcher for the super class, before version 0.2.0, the <i>WithSameValue</i> was not generated. It is now possible to request the generation of this matcher, by using the option <code>allowWeakWithSameValue</code> of the annotation <code>ProvideMatchers</code>.</p></section><section>
<h3><a name="Map"></a>Map</h3>
<p>A dedicated <code>Matcher</code> to support <a href="./map.html"><code>Map</code></a> has been added. It may change the way the comparison was done before.</p></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2020.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
